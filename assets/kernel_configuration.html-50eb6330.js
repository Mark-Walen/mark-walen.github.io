import{_ as l,X as i,Y as r,Z as e,$ as s,a1 as n,a3 as p,a2 as o,E as a}from"./framework-a8949fcd.js";const d={},u=e("h2",{id:"内核配置",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#内核配置","aria-hidden":"true"},"#"),s(" 内核配置")],-1),_=e("p",null,[s("TI-RTOS 应用程序使用配置文件（"),e("code",null,".cfg"),s(" 文件）配置 TI-RTOS 内核。在 IAR 和 CCS 项目中，此文件位于 "),e("code",null,"TOOLS"),s(" 文件夹下的应用程序项目工作区中。")],-1),m={href:"https://dev.ti.com/tirex/explore/content/simplelink_cc2640r2_sdk_5_30_00_03/docs/ble5stack/ble_user_guide/html/ble-stack-5.x-guide/reference-cc2640.html#term-rtsc",target:"_blank",rel:"noopener noreferrer"},k=e("code",null,".cfg",-1),h=e("code",null,"xdc.useModule()",-1),g=e("code",null,"xdc.useModule()",-1),b=e("span",{class:"katex"},[e("span",{class:"katex-mathml"},[e("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[e("semantics",null,[e("mrow",null,[e("msup",null,[e("mrow"),e("mrow",null,[e("mo",{stretchy:"false"},"["),e("mn",null,"1"),e("mo",{stretchy:"false"},"]")])])]),e("annotation",{encoding:"application/x-tex"},"^{[1]}")])])]),e("span",{class:"katex-html","aria-hidden":"true"},[e("span",{class:"base"},[e("span",{class:"strut",style:{height:"0.888em"}}),e("span",{class:"mord"},[e("span"),e("span",{class:"msupsub"},[e("span",{class:"vlist-t"},[e("span",{class:"vlist-r"},[e("span",{class:"vlist",style:{height:"0.888em"}},[e("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[e("span",{class:"pstrut",style:{height:"2.7em"}}),e("span",{class:"sizing reset-size6 size3 mtight"},[e("span",{class:"mord mtight"},[e("span",{class:"mopen mtight"},"["),e("span",{class:"mord mtight"},"1"),e("span",{class:"mclose mtight"},"]")])])])])])])])])])])],-1),f={href:"https://dev.ti.com/tirex/explore/content/simplelink_cc2640r2_sdk_5_30_00_03/docs/tirtos/sysbios/docs/Bios_User_Guide.pdf",target:"_blank",rel:"noopener noreferrer"},x=e("p",{style:{color:"#666"}},[s("以下内容为译者补充，了解更多 "),e("code",null,"XDCscript")],-1),v={href:"https://software-dl.ti.com/dsps/dsps_public_sw/sdo_sb/targetcontent/rtsc/3_16_02_32/exports/docs/rtscpedia/XDCscript_-_xdc.useModule/XDCscript_-_xdc.useModule.html",target:"_blank",rel:"noopener noreferrer"},S={href:"https://www.ti.com/lit/ug/spruex4/spruex4.pdf",target:"_blank",rel:"noopener noreferrer"},O={href:"https://blog.csdn.net/ambercctv/article/details/116175625%22",target:"_blank",rel:"noopener noreferrer"},T=o("<p><code>.cfg</code> 文件中可以配置的一些选项包括但不限于：</p><ul><li>Boot options</li><li>Hwi、Swi 和任务优先级的数量</li><li>Exception and Error handling</li><li>系统 tick 的持续时间（TI-RTOS 内核中最基本的时间单位）</li><li>定义应用程序的入口点和中断向量</li><li>TI-RTOS heaps and stacks</li><li>引入预编译内核和 TI-RTOS 驱动程序库</li><li>System providers (for System_printf())</li></ul>",2),w=e("code",null,".cfg",-1),C={href:"https://dev.ti.com/tirex/explore/content/simplelink_cc2640r2_sdk_5_30_00_03/docs/ble5stack/ble_user_guide/html/ble-stack-5.x-guide/reference-cc2640.html#term-iar",target:"_blank",rel:"noopener noreferrer"},R={href:"https://dev.ti.com/tirex/explore/content/simplelink_cc2640r2_sdk_5_30_00_03/docs/ble5stack/ble_user_guide/html/ble-stack-5.x-guide/reference-cc2640.html#term-ccs",target:"_blank",rel:"noopener noreferrer"},I={href:"https://dev.ti.com/tirex/explore/content/simplelink_cc2640r2_sdk_5_30_00_03/docs/ble5stack/ble_user_guide/html/ble-stack-5.x-guide/reference-cc2640.html#term-rom",target:"_blank",rel:"noopener noreferrer"},M=e("code",null,".cfg",-1),y={href:"https://dev.ti.com/tirex/explore/content/simplelink_cc2640r2_sdk_5_30_00_03/docs/ble5stack/ble_user_guide/html/ble-stack-5.x-guide/reference-cc2640.html#term-rom",target:"_blank",rel:"noopener noreferrer"},B=e("a",{href:"#rom-listing"},"清单 1",-1),E=e("br",null,null,-1),X=o(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/* ================ ROM configuration ================ */</span>
<span class="token comment">/*
 * To use BIOS in flash, comment out the code block below.
 */</span>
<span class="token keyword">var</span> <span class="token constant">ROM</span> <span class="token operator">=</span> xdc<span class="token punctuation">.</span><span class="token function">useModule</span><span class="token punctuation">(</span><span class="token string">&#39;ti.sysbios.rom.ROM&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>Program<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>deviceName<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">CC26X2</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">ROM</span><span class="token punctuation">.</span>romName <span class="token operator">=</span> <span class="token constant">ROM</span><span class="token punctuation">.</span><span class="token constant">CC26X2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Program<span class="token punctuation">.</span>cpu<span class="token punctuation">.</span>deviceName<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">CC13X2</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">ROM</span><span class="token punctuation">.</span>romName <span class="token operator">=</span> <span class="token constant">ROM</span><span class="token punctuation">.</span><span class="token constant">CC13X2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ROM 中的 TI-RTOS 内核针对性能进行了优化。如果您的应用程序需要额外的仪器（通常用于调试），您必须在 flash 内存中包含 TI-RTOS 内核，这将增加 flash 内存消耗。</p><ul><li><code>BIOS.assertsEnabled</code> 必须设置为</li><li><code>BIOS.logsEnabled</code> 必须设置为 <code>false</code></li><li><code>BIOS.taskEnabled</code> 必须设置为 <code>true</code></li><li><code>BIOS.swiEnabled</code> 必须设置为 <code>true</code></li><li><code>BIOS.runtimeCreatesEnabled</code> 必须设置为 <code>true</code></li><li>BIOS 必须使用 <code>ti.sysbios.gates.GateMutex</code> 模块</li><li><code>Clock.tickSource</code> 必须设置为 <code>Clock.TickSource_TIMER</code></li><li><code>Semaphore.supportsPriority</code> must be <code>false</code></li><li>不允许使用 Swi, Task, and Hwi 钩子函数</li><li>不允许使用 Swi, Task, and Hwi 具名实例</li><li>禁用 Task 堆栈检查</li><li><code>Hwi.disablePriority</code> 必须设置为 <code>0x20</code></li><li><code>Hwi.dispatcherAutoNestingSupport</code> 必须设置为 <code>true</code></li></ul>`,3);function N(D,P){const t=a("ExternalLinkIcon"),c=a("center");return i(),r("div",null,[u,_,e("p",null,[s("配置是通过有选择性地引入或使用内核可用的 "),e("a",m,[s("RTSC"),n(t)]),s(" 模块来完成的。若要使用模块，在 "),k,s(" 配置文件中调用 "),h,s(" 之后，"),g,s(),b,s(" 可以设置 "),e("a",f,[s("TI-RTOS Kernel (SYS/BIOS) User’s Guide"),n(t)]),s(" 中定义的各种选项。")]),x,e("blockquote",null,[e("ul",null,[e("li",null,[e("p",null,[s("官方 API 文档 "),e("a",v,[s("XDCscript - xdc.useModule"),n(t)])])]),e("li",null,[e("p",null,[e("a",S,[s("XDC Consumer User's Guide"),n(t)])])]),e("li",null,[e("p",null,[e("a",O,[s("xdc.useModule 和 xdc.loadPackage两个函数使用心得"),n(t)])])])])]),T,e("p",null,[s("每当对 "),w,s(" 文件进行更改时，您将重新运行 XDCTools 的配置工具。在提供的 "),e("a",C,[s("IAR"),n(t)]),s(" 和 "),e("a",R,[s("CCS"),n(t)]),s(" 示例中，此步骤已作为预构建步骤为您处理。")]),e("p",null,[s("对于 CC2640R2，"),e("a",I,[s("ROM"),n(t)]),s(" 中存在一个 TI-RTOS 内核。通常为了节省闪存占用空间，"),M,s(" 将包含内核的 "),e("a",y,[s("ROM"),n(t)]),s(" 模块，如"),B,s(" 所示。")]),n(c,{id:"rom-listing"},{default:p(()=>[s(" 清单1. 如何在 ROM 中包含 TI-RTOS 内核 "),E]),_:1}),X])}const A=l(d,[["render",N],["__file","kernel_configuration.html.vue"]]);export{A as default};
