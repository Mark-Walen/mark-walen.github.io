<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>栈 | Blue Monster</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#1e2d51">
    <meta name="description" content="在此小栈喝盏茶，小憩片刻，汲取知识。">
    <meta name="author" content="Mark Walen">
    <meta name="keywords" content="蓝芒小栈,Blue Monster,嵌入式软件,STM32,C 语言,数据结构">
    <meta name="theme-color" content="#1e2d51">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.ec95ac3a.css" as="style"><link rel="preload" href="/assets/js/app.7099126a.js" as="script"><link rel="preload" href="/assets/js/2.0bcf0fe5.js" as="script"><link rel="preload" href="/assets/js/27.2667b260.js" as="script"><link rel="preload" href="/assets/js/3.94c01751.js" as="script"><link rel="prefetch" href="/assets/js/10.e91b63fd.js"><link rel="prefetch" href="/assets/js/11.a760ca5e.js"><link rel="prefetch" href="/assets/js/12.6771515a.js"><link rel="prefetch" href="/assets/js/13.3487e202.js"><link rel="prefetch" href="/assets/js/14.2de6dedc.js"><link rel="prefetch" href="/assets/js/15.e86c1792.js"><link rel="prefetch" href="/assets/js/16.63d2bce2.js"><link rel="prefetch" href="/assets/js/17.ef560323.js"><link rel="prefetch" href="/assets/js/18.8d0f809c.js"><link rel="prefetch" href="/assets/js/19.6b8bc6e3.js"><link rel="prefetch" href="/assets/js/20.16926133.js"><link rel="prefetch" href="/assets/js/21.b44ed802.js"><link rel="prefetch" href="/assets/js/22.682adcb3.js"><link rel="prefetch" href="/assets/js/23.0ce98934.js"><link rel="prefetch" href="/assets/js/24.92c8f8ce.js"><link rel="prefetch" href="/assets/js/25.844a5f79.js"><link rel="prefetch" href="/assets/js/26.27a722db.js"><link rel="prefetch" href="/assets/js/28.822608a4.js"><link rel="prefetch" href="/assets/js/4.07fc0971.js"><link rel="prefetch" href="/assets/js/5.1ed8e759.js"><link rel="prefetch" href="/assets/js/6.e86380d3.js"><link rel="prefetch" href="/assets/js/7.2a955bf9.js"><link rel="prefetch" href="/assets/js/8.2d140ac7.js"><link rel="prefetch" href="/assets/js/9.2e62f1e7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ec95ac3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Blue Monster</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Programming" class="dropdown-title"><span class="title">编程基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Programming" class="mobile-dropdown-title"><span class="title">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/program/c/" class="nav-link">
  C 语言程序设计
</a></li><li class="dropdown-item"><!----> <a href="/program/data-structure/" class="nav-link router-link-active">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Embedded System" class="dropdown-title"><span class="title">嵌入式系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="Embedded System" class="mobile-dropdown-title"><span class="title">嵌入式系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          BLE5 Stack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/embedded-system/ble5-stack/ti-rtos/" class="nav-link">
  TI-RTOS
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/embedded-system/ecp/" class="nav-link">
  电子通信协议
</a></li><li class="dropdown-item"><!----> <a href="/embedded-system/stm32/stm32-learning-process.html" class="nav-link">
  STM32 入门学习
</a></li></ul></div></div><div class="nav-item"><a href="/resources.html" class="nav-link">
  资源领取
</a></div><div class="nav-item"><a href="https://dev.ti.com/tirex/explore/node?node=AAliBv1MZ54NaV.m2AIT8w__krol.2c__LATEST" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TI Resource Explorer
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Programming" class="dropdown-title"><span class="title">编程基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Programming" class="mobile-dropdown-title"><span class="title">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/program/c/" class="nav-link">
  C 语言程序设计
</a></li><li class="dropdown-item"><!----> <a href="/program/data-structure/" class="nav-link router-link-active">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Embedded System" class="dropdown-title"><span class="title">嵌入式系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="Embedded System" class="mobile-dropdown-title"><span class="title">嵌入式系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          BLE5 Stack
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/embedded-system/ble5-stack/ti-rtos/" class="nav-link">
  TI-RTOS
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/embedded-system/ecp/" class="nav-link">
  电子通信协议
</a></li><li class="dropdown-item"><!----> <a href="/embedded-system/stm32/stm32-learning-process.html" class="nav-link">
  STM32 入门学习
</a></li></ul></div></div><div class="nav-item"><a href="/resources.html" class="nav-link">
  资源领取
</a></div><div class="nav-item"><a href="https://dev.ti.com/tirex/explore/node?node=AAliBv1MZ54NaV.m2AIT8w__krol.2c__LATEST" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TI Resource Explorer
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>数据结构基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/program/data-structure/linear-table.html" class="sidebar-link">线性表</a></li><li><a href="/program/data-structure/stack.html" aria-current="page" class="active sidebar-link">栈</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/program/data-structure/stack.html#顺序栈" class="sidebar-link">顺序栈</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/program/data-structure/stack.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/program/data-structure/stack.html#存储结构" class="sidebar-link">存储结构</a></li><li class="sidebar-sub-header"><a href="/program/data-structure/stack.html#基本操作" class="sidebar-link">基本操作</a></li><li class="sidebar-sub-header"><a href="/program/data-structure/stack.html#用数组模拟栈" class="sidebar-link">用数组模拟栈</a></li><li class="sidebar-sub-header"><a href="/program/data-structure/stack.html#用结构体实现" class="sidebar-link">用结构体实现</a></li><li class="sidebar-sub-header"><a href="/program/data-structure/stack.html#附录" class="sidebar-link">附录</a></li><li class="sidebar-sub-header"><a href="/program/data-structure/stack.html#练习" class="sidebar-link">练习</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="栈"><a href="#栈" class="header-anchor">#</a> 栈</h1> <h2 id="顺序栈"><a href="#顺序栈" class="header-anchor">#</a> 顺序栈</h2> <h3 id="定义"><a href="#定义" class="header-anchor">#</a> 定义</h3> <blockquote><p><strong>栈</strong> 仅限定在表尾进行插入或删除操作的线性表，是一种<strong>后进先出</strong>的数据结构</p></blockquote> <p><img src="https://aliyun-lc-upload.oss-cn-hangzhou.aliyuncs.com/aliyun-lc-upload/uploads/2018/06/03/screen-shot-2018-06-02-at-203523.png" alt="栈"></p> <center><font size="2px">图1.1 栈 (来源：<a href="https://leetcode-cn.com/leetbook/read/queue-stack/ghqur/">leetcode</a>)</font></center> <h3 id="存储结构"><a href="#存储结构" class="header-anchor">#</a> 存储结构</h3> <p>我们通过移动栈顶指针(top)进行相关的数据操作，用线性结构(如数组、链表等)存储栈的元素</p> <p>顺序栈的表示：</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAXSIZE</span> <span class="token expression"><span class="token number">100</span>			</span><span class="token comment">//顺序栈存储空间的初始分配量</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">int</span> ElemType<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span>
<span class="token punctuation">{</span>
    ElemType <span class="token operator">*</span>base<span class="token punctuation">;</span>			<span class="token comment">//存储栈元素</span>
    <span class="token keyword">int</span> top<span class="token punctuation">;</span>				<span class="token comment">//栈顶指针</span>
<span class="token punctuation">}</span>
</code></pre></div><p>严蔚敏书中的定义：</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAXSIZE</span> <span class="token expression"><span class="token number">100</span>				</span><span class="token comment">//顺序栈存储空间的初始分配量</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">int</span> SElemType<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span>
<span class="token punctuation">{</span>
    ElemType <span class="token operator">*</span>base<span class="token punctuation">;</span>				<span class="token comment">//存储栈元素</span>
    ElemType <span class="token operator">*</span>top<span class="token punctuation">;</span>				<span class="token comment">//栈顶指针</span>
    <span class="token keyword">int</span> stacksize<span class="token punctuation">;</span>				<span class="token comment">//栈可用的最大容量</span>
<span class="token punctuation">}</span>
</code></pre></div><p><mark>说明1</mark></p> <ol><li>栈底指针base始终指向栈底的位置，若base的值为NULL，表明栈结构不存在</li> <li>top为栈顶指针，其初值指向栈底，即<code>top = base</code> <ol><li>向栈顶插入新的元素时，指针top增1（前提：栈未满）</li> <li>删除栈顶元素时，指针top减1（前提：栈不为空）</li></ol></li></ol> <h3 id="基本操作"><a href="#基本操作" class="header-anchor">#</a> 基本操作</h3> <p>⚠️ <span style="background-color:red;color:#f2f2f2;">栈只能在栈顶进行一系列操作。</span></p> <blockquote><p>入栈<code>push_back</code>(插入操作)、出栈<code>pop_back</code>(删除操作)、栈空的判断(<code>isEmpty</code>)、取栈顶元素(<code>getTop</code>)</p></blockquote> <h4 id="初始化"><a href="#初始化" class="header-anchor">#</a> 初始化</h4> <p><mark>定义</mark> 为顺序栈动态分配一个预定义大小的数组空间。</p> <p><mark>动画</mark></p> <img src="/assets/img/stack/Init.gif" alt="InitStack" style="zoom:500%;"> <center><font size="2px">图2.1 初始化栈</font></center> <p><mark>实现</mark> 点击 <a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A0%88">➡️</a>，查看。</p> <h4 id="入栈"><a href="#入栈" class="header-anchor">#</a> 入栈</h4> <p><mark>定义</mark> 入栈操作是指在栈顶插入一个新的元素</p> <p><mark>动画</mark></p> <p><img src="/assets/img/stack/push.gif" alt="insert-stack"></p> <p><mark>实现</mark> 点击 <a href="#%E5%85%A5%E6%A0%88-2">➡️</a>，查看。</p> <h4 id="出栈"><a href="#出栈" class="header-anchor">#</a> 出栈</h4> <p><mark>定义</mark> 将栈顶元素删除</p> <p><mark>动画</mark></p> <p><img src="/assets/img/stack/pop.gif" alt="pop-back"></p> <p><mark>实现</mark> 点击 <a href="#%E5%87%BA%E6%A0%88-2">➡️</a>，查看。</p> <h3 id="用数组模拟栈"><a href="#用数组模拟栈" class="header-anchor">#</a> 用数组模拟栈</h3> <h4 id="动态数组模拟栈"><a href="#动态数组模拟栈" class="header-anchor">#</a> 动态数组模拟栈</h4> <blockquote><p>动态数组：动态数组的内存空间是从堆动态分配的。是通过执行代码(关键字：<code>malloc</code>, <code>calloc</code>, <code>realloc)</code>而为其分配存储空间。<a href="https://blog.csdn.net/zhanshen112/article/details/80758850" target="_blank" rel="noopener noreferrer">详情<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAXSIZE</span> <span class="token expression"><span class="token number">100</span></span></span>

<span class="token keyword">typedef</span> <span class="token keyword">int</span> ElemType<span class="token punctuation">;</span>
<span class="token keyword">int</span> top<span class="token punctuation">;</span>	<span class="token comment">//栈顶指针</span>
ElemType <span class="token operator">*</span> <span class="token function">InitStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>							<span class="token comment">//初始化栈</span>
<span class="token keyword">void</span> <span class="token function">PushBack</span><span class="token punctuation">(</span>ElemType <span class="token operator">*</span>stack<span class="token punctuation">,</span> ElemType data<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//入栈</span>
ElemType <span class="token function">PopBack</span><span class="token punctuation">(</span>ElemType <span class="token operator">*</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">//出栈</span>
ElemType <span class="token function">GetTop</span><span class="token punctuation">(</span>ElemType <span class="token operator">*</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">//取栈顶元素</span>
<span class="token keyword">int</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>									<span class="token comment">//判断栈为空</span>

ElemType<span class="token operator">*</span> <span class="token function">InitStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	ElemType <span class="token operator">*</span>stack <span class="token operator">=</span> <span class="token punctuation">(</span>ElemType <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ElemType<span class="token punctuation">)</span><span class="token operator">*</span>MAXSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> stack<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">PushBack</span><span class="token punctuation">(</span>ElemType <span class="token operator">*</span>stack<span class="token punctuation">,</span> ElemType data<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">==</span> MAXSIZE<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>		<span class="token comment">//栈满则不能插入</span>
    stack<span class="token punctuation">[</span>top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ElemType <span class="token function">PopBack</span><span class="token punctuation">(</span>ElemType <span class="token operator">*</span>stack<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>		<span class="token comment">//栈为空</span>
    <span class="token keyword">return</span> stack<span class="token punctuation">[</span><span class="token operator">--</span>top<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ElemType <span class="token function">GetTop</span><span class="token punctuation">(</span>ElemType <span class="token operator">*</span>stack<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> stack<span class="token punctuation">[</span>top<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//初始化栈</span>
    <span class="token keyword">return</span> top <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//初始化栈1;</span>
    ElemType <span class="token operator">*</span>stack <span class="token operator">=</span> <span class="token function">InitStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//初始化栈2;</span>
    <span class="token comment">//ElemType *stack = (ElemType *)malloc(sizeof(ElemType)*MAXSIZE);</span>
    <span class="token comment">//top = 0;</span>
    <span class="token function">free</span><span class="token punctuation">(</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//动态分配的空间记得释放。</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><mark>小结</mark></p> <ol><li>用数组实现栈比较方便，容易实现。</li> <li>可以使用静态数组模拟栈(实现见<a href="#%E9%9D%99%E6%80%81%E6%95%B0%E7%BB%84">附录</a>)
<ol><li>定义初始化一个静态数组，并定义一个下标(top = 0)模拟栈顶指针;</li> <li>向栈中插入元素<code>top++</code>，删除元素<code>--top</code>；</li> <li>栈为空即<code>top=0</code> 栈满top值等于初始化时数组的长度。</li></ol></li> <li>用数组模拟栈，进行删除操作时，其实需要删除的元素(设下标为del )并未删除，当我们去遍历整个数组（即栈区: <code>[0, top]</code> + 非栈区：<code>[top+1, stackSize]</code>）时依然可以看见stack[del]. 当我们再次插入元素(<code>top = del</code>)时，下标<code>del</code>处的值会被覆盖重写。</li></ol> <h3 id="用结构体实现"><a href="#用结构体实现" class="header-anchor">#</a> 用结构体实现</h3> <blockquote><p>本文用上述<a href="#%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84">存储结构</a>中第一种定义的结构体实现。</p></blockquote> <p><mark>Tips</mark> 当然也可以根据自己的需求定义相应栈的结构体。</p> <h4 id="相关头文件"><a href="#相关头文件" class="header-anchor">#</a> 相关头文件</h4> <p><span id="header"><code>stack.h</code></span></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">STACK_H_INCLUDED</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">STACK_H_INCLUDED</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAXSTACKSIZE</span> <span class="token expression"><span class="token number">100</span></span></span>
<span class="token keyword">typedef</span> <span class="token keyword">int</span> ElemType<span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span>
<span class="token punctuation">{</span>
    ElemType <span class="token operator">*</span>base<span class="token punctuation">;</span>				<span class="token comment">//用于存储数据</span>
    <span class="token keyword">int</span> top<span class="token punctuation">;</span>					<span class="token comment">//栈顶指针，栈尾指针默认为下标0</span>
<span class="token punctuation">}</span>SeqStack<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">InitStack</span><span class="token punctuation">(</span>SeqStack <span class="token operator">*</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">//初始化栈</span>
<span class="token keyword">void</span> <span class="token function">Destroy</span><span class="token punctuation">(</span>SeqStack <span class="token operator">*</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//销毁栈</span>
<span class="token keyword">void</span> <span class="token function">ClearStack</span><span class="token punctuation">(</span>SeqStack <span class="token operator">*</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//清空栈</span>
<span class="token keyword">int</span> <span class="token function">Empty</span><span class="token punctuation">(</span>SeqStack stack<span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment">//判断栈是否为空</span>
<span class="token keyword">int</span> <span class="token function">length</span><span class="token punctuation">(</span>SeqStack stack<span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">//获取栈元素的个数</span>
ElemType <span class="token function">GetTop</span><span class="token punctuation">(</span>SeqStack stack<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//获取栈顶元素</span>
<span class="token keyword">void</span> <span class="token function">PushBack</span><span class="token punctuation">(</span>SeqStack <span class="token operator">*</span>stack<span class="token punctuation">,</span> ElemType data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//栈顶插入元素</span>
ElemType <span class="token function">PopBack</span><span class="token punctuation">(</span>SeqStack <span class="token operator">*</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//删除栈顶元素，并返回</span>
<span class="token keyword">void</span> <span class="token function">Traverse</span><span class="token punctuation">(</span>SeqStack stack<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//遍历栈</span>


<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// STACK_H_INCLUDED</span></span>
</code></pre></div><h4 id="初始化栈"><a href="#初始化栈" class="header-anchor">#</a> 初始化栈</h4> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">InitStack</span><span class="token punctuation">(</span>SeqStack <span class="token operator">*</span>stack<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    stack<span class="token operator">-&gt;</span>base <span class="token operator">=</span> <span class="token punctuation">(</span>ElemType <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ElemType<span class="token punctuation">)</span><span class="token operator">*</span>MAXSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//为栈申请空间</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token operator">-&gt;</span>base<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>	<span class="token comment">//分配失败，终止。当然我们也可以修改函数的返回类型，了解分配情况。</span>
    stack<span class="token operator">-&gt;</span>top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//返回SeqStack *类型</span>
SeqStack <span class="token operator">*</span><span class="token function">InitStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    SeqStack <span class="token operator">*</span>stack<span class="token punctuation">;</span>
    stack<span class="token operator">-&gt;</span>base <span class="token operator">=</span> <span class="token punctuation">(</span>ElemType <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ElemType<span class="token punctuation">)</span><span class="token operator">*</span>MAXSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//为栈申请空间</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token operator">-&gt;</span>base<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>	<span class="token comment">//分配失败，终止。当然我们也可以修改函数的返回类型，了解分配情况。</span>
    stack<span class="token operator">-&gt;</span>top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> stack<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><mark>说明1</mark></p> <p>对于严蔚敏书中的实现：</p> <ol><li><p>由于c语言中不能使用引用类型(&amp;)作为函数形式参数使用，所以改用指针。但在调用函数传递实参时可以使用（C语言中是取地址符），因为传入的是变量的地址。</p> <p>以<strong>初始化栈函数为例</strong>：<code>SeqStack stack; InitStack(&amp;stack);</code></p></li> <li><p>栈顶指针：<code>*top</code> | 栈尾指针：*base。</p> <p>top初始化为base：<code>stack-&gt;top = stack-&gt;base</code>表示栈为空。</p> <p><font color="red">解释</font>：<font size="3px" color="#333">当两个指针指向同一个数组时，它们可以相减，其为结果为两个指针之间的元素数目。</font></p></li></ol> <h4 id="入栈-2"><a href="#入栈-2" class="header-anchor">#</a> 入栈</h4> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">PushBack</span><span class="token punctuation">(</span>SeqStack <span class="token operator">*</span>stack<span class="token punctuation">,</span> ElemType data<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">//判断栈是否已满</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>stack<span class="token operator">-&gt;</span>top <span class="token operator">&lt;</span> MAXSTACKSIZE<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        stack<span class="token operator">-&gt;</span>base<span class="token punctuation">[</span>stack<span class="token operator">-&gt;</span>top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;stack overflow!!!\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><mark>说明2</mark></p> <p>对于严蔚敏书中的实现：</p> <ol><li><p>函数定义<code>Status Push(SqStack *stack, SElemType e);</code></p></li> <li><p>元素入栈:</p> <ol><li><p><code>*(stack-&gt;top) = e;stack-&gt;top++;</code></p> <p><font color="red">解释</font>：<font size="3px" color="#333">定义变量a：<code>int *a</code>，<code>stack-&gt;top</code> 相当于<code>a</code> (<code>*(stack-&gt;top)</code>相当于<code>*a</code>)。 </font></p></li> <li><p>不能这样赋值：<code>stack-&gt;top = &amp;e;</code>。</p> <p><font color="red">解释</font>：这样会把<code>e</code>的地址值赋给<code>stack-&gt;top</code>。<code>stack-&gt;top</code>与<code>stack-&gt;base</code>指向的不是同一个数组，即<code>stack-&gt;top - stack-&gt;base</code>不能用来判断栈空或栈满。</p></li></ol></li></ol> <h4 id="出栈-2"><a href="#出栈-2" class="header-anchor">#</a> 出栈</h4> <div class="language-c extra-class"><pre class="language-c"><code>ElemType <span class="token function">PopBack</span><span class="token punctuation">(</span>SeqStack <span class="token operator">*</span>stack<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">//判断栈是否为空</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">Empty</span><span class="token punctuation">(</span><span class="token operator">*</span>stack<span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">//? stack-&gt;top = 0</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//可以简化为 return stack-&gt;base[--stack-&gt;top];</span>
        ElemType data <span class="token operator">=</span> stack<span class="token operator">-&gt;</span>base<span class="token punctuation">[</span><span class="token operator">--</span>stack<span class="token operator">-&gt;</span>top<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;stack is empty!!!\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><mark>说明3</mark></p> <p>对于严蔚敏书中的实现：</p> <ol><li><p>函数定义 ①<code>Status Pop(SqStack *stack, ElemType *e);</code>或②<code>ElemType Pop(SqStack *stack)</code></p></li> <li><p>函数出栈</p> <ol><li><p>①：<code>e = --stack-&gt;top;</code></p> <p><font color="red">解释</font>：将--s-&gt;top(栈顶)的地址值赋给e。</p></li> <li><p>②：<code>return *(--stack-&gt;top);</code></p></li></ol></li></ol> <h4 id="取栈顶元素"><a href="#取栈顶元素" class="header-anchor">#</a> 取栈顶元素</h4> <div class="language-c extra-class"><pre class="language-c"><code>ElemType <span class="token function">GetTop</span><span class="token punctuation">(</span>SeqStack <span class="token operator">*</span>stack<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stack<span class="token operator">-&gt;</span>top <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span>stack<span class="token operator">-&gt;</span>top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//栈为空，返回-1;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><span style="background-color:yellow;color:#333;">写在最后</span> 栈的基本操作已实现，对于<a href="#header">stack.h</a>中未实现的函数，可以自己尝试去实现，感谢你的阅读。</p> <h3 id="附录"><a href="#附录" class="header-anchor">#</a> 附录</h3> <h4 id="静态数组模拟栈"><a href="#静态数组模拟栈" class="header-anchor">#</a> 静态数组模拟栈</h4> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> stack<span class="token punctuation">[</span>stackSize<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//stackSize：栈的长度，请自行定义并初始化。</span>
    <span class="token keyword">int</span> top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    
    <span class="token comment">//k in [1, stackSize]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        stack<span class="token punctuation">[</span>top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">*</span>i <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>		<span class="token comment">//插入元素</span>
    <span class="token punctuation">}</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;删除的元素：%d\n&quot;</span><span class="token punctuation">,</span> stack<span class="token punctuation">[</span><span class="token operator">--</span>top<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;栈顶元素：%d\n&quot;</span><span class="token punctuation">,</span> stack<span class="token punctuation">[</span>top<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><mark>思考</mark> 当删除元素时，一定是<code>--top</code>吗？</p> <p>回答：其实<code>--top</code> 与 <code>top--</code>两者皆可。top的含义：栈顶指针以及栈中元素的个数。数组的下标是从0开始的，所以栈顶元素的值：<code>stack[top-1]</code>。我们知道删除元素是删除栈顶元素（设下标为<code>del = top-1</code>），当我们需要使用这个元素时（如作为返回值、输出或其它用途）推荐使用<code>--top</code>(<code>top = del</code>)，当然使用 <code>top--</code>也可以(① <code>top--;stack[top];</code> 或 ②<code>stack[top-1]; top--；</code>)</p> <h3 id="练习"><a href="#练习" class="header-anchor">#</a> 练习</h3> <ol><li><p><a href="https://leetcode-cn.com/problems/valid-parentheses/" target="_blank" rel="noopener noreferrer">有效的括号<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://leetcode-cn.com/problems/evaluate-reverse-polish-notation/" target="_blank" rel="noopener noreferrer">逆波兰表达式求值<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://leetcode-cn.com/problems/validate-stack-sequences/" target="_blank" rel="noopener noreferrer">验证栈序列<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022年8月6日晚上10点40分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/program/data-structure/linear-table.html" class="prev">
        线性表
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 Blue Monster
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/assets/music/Anson Seabra - Last Time.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:30px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/assets/img/cover/last-time.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/assets/img/cover/last-time.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>Last Time</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>Anson Seabra</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div><!----><div id="vuepress-party-cursor" data-v-16fbd2e9></div></div></div>
    <script src="/assets/js/app.7099126a.js" defer></script><script src="/assets/js/2.0bcf0fe5.js" defer></script><script src="/assets/js/27.2667b260.js" defer></script><script src="/assets/js/3.94c01751.js" defer></script>
  </body>
</html>
